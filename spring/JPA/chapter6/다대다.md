- ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì •ê·œí™”ëœ í…Œì´ë¸” 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ í‘œí˜„í•  ìˆ˜ ì—†ë‹¤.
- ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ ë‚¼ ìˆ˜ ìˆë‹¤.

![](https://mblogthumb-phinf.pstatic.net/MjAyMjAzMTZfMjA5/MDAxNjQ3NDE1NDIzNTU1.3idrEmkf9GooR2oonGwsbHm6zN9ZFz9AvWAYmEhIOtcg.ritsheFM_NSm3OYGCc7quw8f-emn1NAbWIpmKonXSosg.PNG.fbfbf1/image.png?type=w800)



í•˜ì§€ë§Œ ê°ì²´ëŠ” í…Œì´ë¸”ê³¼ ë‹¤ë¥´ê²Œ **ê°ì²´ 2ê°œë¡œ ë‹¤ëŒ€ë‹¤** ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

# ë‹¨ë°©í–¥

## Member.class

```java
@Entity
public class Member {
	@Id @Column(name = "MEMBER_ID")
	private String id;

	private String username;

	@ManyToMany
	@JoinTable(name = "MEMBER_PRODUCT",
						joinColumn = @JoinColumn(name = "MEMBER_ID"),
						inverseJoinColumns = @JoinColumn(name = "PRODUCT_ID"))
		private List<Product> products = new ArrayList<>();
}
```

## Product.class

```java
@Entity
public class Product {
	@Id @Column(name = "PRODUCT_ID")
	private String id;

	private String name;
}
```

- @ManyToManyëŠ” **@JoinTable**ì„ ì‚¬ìš©í•´ì„œ ì—°ê²° í…Œì´ë¸”ë¡œ ë§¤í•‘í•´ì•¼ í•œë‹¤.

## JoinTable ì†ì„±

- name : ì—°ê²° í…Œì´ë¸”ì„ ì§€ì •í•œë‹¤.
- joinColumns : í˜„ì¬ ë°©í–¥ì¸ íšŒì›ê³¼ ë§¤í•‘í•  ì¡°ì¸ ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§€ì •í•œë‹¤.
- inverseJoinColumns : ë°˜ëŒ€ ë°©í–¥ì¸ ìƒí’ˆê³¼ ë§¤í•‘í•  ì¡°ì¸ ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§€ì •í•œë‹¤.

# ì–‘ë°©í–¥

ìœ„ ì½”ë“œì—ì„œ ì–‘ë°©í–¥ ë§¤í•‘ìœ¼ë¡œ ë°”ê¿€ë ¤ë©´ Product í´ë˜ìŠ¤ì—ë„ Member í´ë˜ìŠ¤ë¥¼ ë§¤í•‘í•´ì£¼ì–´ì•¼ í•œë‹¤.

```java
@ManyToMany(mappedBy = "products")
private List<Member> members;
```

- memberë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•´ì£¼ì—ˆë‹¤.
- ì–‘ë°©í–¥ìœ¼ë¡œ í•  ì‹œ **ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œ**ë¥¼ ì¶”ê°€í•´ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í¸í•˜ë‹¤.

## Member.class

```java
public void addProduct(Product product) {
	products.add(product);
	product.getMembers.add(this);
}
```

# ë‹¤ëŒ€ë‹¤: ë§¤í•‘ì˜ í•œê³„ì™€ ê·¹ë³µ, ì—°ê²° ì—”í‹°í‹° ì‚¬ìš©

- ì—°ê²° í…Œì´ë¸”ì— **ì»¬ëŸ¼ì„ ì¶”ê°€**í•˜ë©´ @ManyToManyë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
    
    â†’ í…Œì´ë¸” ê´€ê³„ì²˜ëŸ¼ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ì•¼ í•œë‹¤.
    

![](https://3513843782-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-LxjHkZu4T9MzJ5fEMNe%2Fsync%2Ff315432a6d174bd60f559b63ba67ebb2f31d4997.png?generation=1616223197937926&alt=media)


## Member.class

```java
@OneToMany(mappedBy = "member")
private List<MemberProduct> memebrProducts;
```

## MemberProduct.class

```java
@Entity
@IdClass(MemberProductId.class)
public class MemberProduct {
	@Id
	@ManyToOne
	@JoinColumn(name = "MEMBER_ID")
	private Member member;

	@Id
	@ManyToOne
	@JoinColumn(name = "PRODUCT_ID")
	private Product product;

	private int orderAmount;
}
```

- @IdClassëŠ” ë³µí•© ê¸°ë³¸í‚¤ë¥¼ ë§¤í•‘í•˜ê² ë‹¤ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.

## ë³µí•© ê¸°ë³¸ í‚¤

- ë³µí•© í‚¤ëŠ” ë³„ë„ì˜ **ì‹ë³„ì í´ë˜ìŠ¤**ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
- **Serializable**ì„ êµ¬í˜„í•´ì•¼ í•œë‹¤.
- equalsì™€ hashCode ë©”ì†Œë“œë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.
- **ê¸°ë³¸ ìƒì„±ì**ê°€ ìˆì–´ì•¼ í•œë‹¤.
- ì‹ë³„ì í´ë˜ìŠ¤ëŠ” **public** ì´ì—¬ì•¼ í•œë‹¤.

## MemberProductId.class

```java
public class MemberProductId implements Serializable {
	private String member; // MemberProduct.memberì™€ ì—°ê²°
	private String product; // MemberProduct.productì™€ ì—°ê²°

	// hashCode and equlas Override
}
```

ì´ë ‡ê²Œ ì‹ë³„ì í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì£¼ë©´ ëœë‹¤.

## ì‹ë³„ ê´€ê³„

ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¥¼ ë°›ì•„ì„œ ìì‹ ì˜ **ê¸°ë³¸ í‚¤ + ì™¸ë˜ í‚¤**ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ **ì‹ë³„ ê´€ê³„**ë¼ê³  í•œë‹¤.

# ìƒˆë¡œìš´ ê¸°ë³¸ í‚¤ ì‚¬ìš©

- ì˜êµ¬íˆ ì“¸ ìˆ˜ ìˆë‹¤.
- ë¹„ì§€ë‹ˆìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ë³µí•© í‚¤ë¥¼ ë§Œë“¤ì§€ ì•Šì•„ë„ ëœë‹¤.

![](https://blog.kakaocdn.net/dn/lyCla/btrctvOvfRf/swU5kQtAQ9KvWoExAw2j0K/img.png)


Orderë¼ëŠ” í…Œì´ë¸”ì„ ë§Œë“¤ì–´ ìƒˆë¡œìš´ ê¸°ë³¸ í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

## Order.class

```java
@Entity
public class Order {
	@Id @GeneratedValue
	@Column(name = "ORDER_ID")
	private Long id;

	@ManyToOne
	@JoinColumn(name = "MEMBER_ID")
	private Member member;

	@ManbyToOne
	@JoinColumn(name = "PRODUCT_ID")
	private Product product;

	private itn orderAmount;
}
```

- ëŒ€ë¦¬ í‚¤ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œ ì¨ ë³µí•© í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë§¤í•‘ì´ ë‹¨ìˆœí•´ì§„ë‹¤.

ğŸ’¡ **ë³µí•© í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ìƒˆë¡œìš´ ê¸°ë³¸ í‚¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì!!**